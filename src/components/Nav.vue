<template lang="pug">
#nav(v-show="nowPath.fullPath !== '/auth'" @click.self="toggleNav" ref="nav")
  .container
    .option(
      :class="{ active: nowPath.fullPath == '/' }"
      v-if="userData?.category !== 'coach'"
      )
      RouterLink(to="/") 
        <svg v-if="isMobile" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="Layer_1" x="0px" y="0px" width="100%" viewBox="0 0 512 512" enable-background="new 0 0 512 512" xml:space="preserve">
          <path class="target" opacity="1.000000" stroke="none" d=" M1.000000,253.463181   C3.731980,251.093597 6.621884,249.376328 9.169364,247.248993   C22.177462,236.386261 35.038097,225.346725 48.063309,214.504776   C62.964741,202.101105 78.032028,189.896729 92.937958,177.498398   C103.942810,168.344879 114.744858,158.947617 125.745491,149.788940   C138.748764,138.962952 151.917740,128.335999 164.922653,117.511917   C175.926376,108.353447 186.769287,99.002014 197.736938,89.799835   C209.701431,79.761284 221.284393,69.193321 233.845139,59.960011   C247.844604,49.669083 268.478302,50.177589 282.339142,61.785164   C297.439026,74.430344 312.801697,86.761482 327.919220,99.385887   C337.766907,107.609558 347.381653,116.112183 357.657837,124.970039   C357.801788,122.967705 357.986694,121.582092 357.988159,120.196274   C358.007385,102.030525 357.993530,83.864746 358.003784,65.698982   C358.008484,57.385384 361.396912,54.002071 369.678619,54.000912   C389.510986,53.998135 409.343323,53.993576 429.175690,54.003517   C436.703064,54.007290 439.995636,57.318020 439.996796,64.886604   C440.003143,106.051239 440.027191,147.215942 439.945709,188.380402   C439.939514,191.511047 440.461914,193.678223 443.186340,195.869659   C458.544708,208.223480 473.685333,220.849365 488.830536,233.466125   C496.815186,240.117737 504.658203,246.939377 512.782593,253.342117   C513.000000,257.024536 513.000000,261.049103 513.000000,265.536835   C510.400604,268.487030 507.598663,270.797577 505.245087,273.498749   C500.721466,278.690521 496.524628,284.165649 492.056458,289.407501   C487.656372,294.569519 481.034790,295.240967 475.109283,290.484070   C463.939697,281.517365 453.251984,271.953278 442.242767,262.783081   C431.322205,253.686707 420.197357,244.835739 409.265076,235.753204   C400.332123,228.331696 391.604919,220.662842 382.688538,213.221008   C371.630615,203.991791 360.439606,194.922226 349.366608,185.710922   C340.513062,178.345917 331.786285,170.828568 322.937653,163.457581   C311.833893,154.208069 300.637146,145.070145 289.529572,135.825195   C280.677643,128.457642 271.906342,120.993286 263.082336,113.592056   C261.200958,112.014023 259.246552,110.523064 256.895691,108.649147   C248.928879,115.264877 240.992111,121.872696 233.036621,128.457916   C221.884140,137.689438 210.687744,146.868149 199.566666,156.137314   C190.579773,163.627670 181.709991,171.258499 172.727539,178.754272   C161.783691,187.886826 150.761795,196.925735 139.800903,206.037949   C130.956802,213.390396 122.173218,220.815674 113.326538,228.165009   C101.991882,237.581177 90.592636,246.919724 79.274605,256.355743   C70.436188,263.724487 61.673565,271.184265 52.888206,278.616516   C48.232155,282.555450 43.914845,286.991974 38.883652,290.367889   C30.964775,295.681396 25.477823,294.148682 19.912363,287.100830   C14.017087,279.635284 7.625820,272.561432 1.225592,265.658264   C1.000000,261.975464 1.000000,257.950897 1.000000,253.463181  z"/>
          <path class="target" opacity="1.000000" stroke="none" d=" M205.771667,176.747101   C222.909836,162.692734 239.789368,148.888123 257.007721,134.806412   C264.813843,141.185791 272.661957,147.593048 280.502960,154.009033   C291.179077,162.744934 301.877899,171.453384 312.513885,180.237900   C321.123718,187.348969 329.606873,194.613693 338.233734,201.703766   C348.623077,210.242340 359.143768,218.621155 369.534637,227.157913   C377.929230,234.054565 386.173798,241.133728 394.560608,248.039978   C405.201202,256.802124 415.925171,265.463013 426.598938,274.184998   C430.543243,277.408051 434.558990,280.559357 438.296143,284.009888   C439.320801,284.955933 439.928101,286.865051 439.930389,288.333496   C440.012207,340.150787 440.034241,391.968353 439.961945,443.785675   C439.950714,451.847046 430.981018,460.882263 422.417694,460.914062   C381.099121,461.067383 339.779480,460.943146 298.460236,460.902039   C298.163788,460.901733 297.867493,460.687256 297.179962,460.421722   C297.179962,420.307648 297.179962,380.052917 297.179962,339.399780   C270.412964,339.399780 244.038086,339.399780 217.087891,339.399780   C217.087891,379.723236 217.087891,420.097687 217.087891,460.999908   C214.906555,460.999908 213.290329,460.999908 211.674103,460.999908   C172.519424,460.999878 133.363007,460.797607 94.211273,461.136230   C83.897385,461.225403 73.732239,451.434296 73.819954,440.879425   C74.227020,391.897827 74.178726,342.909515 73.795456,293.927521   C73.741768,287.066406 76.253571,283.144836 81.241005,279.260559   C92.235207,270.698120 102.866257,261.669800 113.657166,252.845825   C128.003784,241.114273 142.396255,229.438477 156.702881,217.658401   C167.096771,209.100021 177.379166,200.406281 187.719635,191.782928   C193.642151,186.843903 199.581329,181.924881 205.771667,176.747101  z"/>
        </svg>
        div 回首頁
    .option.signin(
      :class="{ active: nowPath.fullPath == '/' }" 
      v-if="!userData" 
      ) 
      RouterLink(to="/auth")
        <svg v-if="isMobile" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="Layer_1" x="0px" y="0px" width="100%" viewBox="0 0 512 512" enable-background="new 0 0 512 512" xml:space="preserve">
          <path class="target" opacity="1.000000" stroke="none" d=" M356.000000,513.000000   C347.312439,513.000000 338.624878,513.000000 329.806763,512.720337   C324.099915,509.151825 317.783569,506.673431 313.105469,502.401154   C304.084839,494.163147 299.327759,483.402435 299.032440,471.003601   C298.859711,463.752289 299.000977,456.493469 299.000977,449.000000   C277.431274,449.000000 256.611359,448.695709 235.806030,449.114502   C223.398819,449.364288 212.121719,446.431152 201.740433,439.916962   C182.899185,428.094238 172.692993,410.660126 171.209488,388.795593   C170.140350,373.038391 170.410965,357.122040 171.164261,341.328247   C171.946381,324.929993 187.380447,316.585938 202.158768,322.727448   C211.177933,326.475616 214.905930,334.087708 214.974579,343.550751   C215.072495,357.046997 215.383774,370.558655 214.885574,384.037201   C214.435715,396.208191 224.750275,406.046478 237.011459,406.012756   C255.840393,405.960999 274.669586,405.998993 293.498657,405.998871   C295.250488,405.998871 297.002289,405.998840 299.001068,405.998840   C299.001068,403.087646 299.001068,400.935547 299.001068,398.783478   C299.000824,294.807007 298.979309,190.830490 299.028748,86.854042   C299.034546,74.668243 302.979309,63.764629 312.156494,55.570602   C317.311615,50.967754 323.546082,47.573708 328.758575,44.002102   C298.178253,44.002102 266.686920,43.747826 235.203659,44.141396   C224.331421,44.277313 214.985367,53.291157 214.939911,64.763023   C214.903885,73.850693 215.026367,83.030098 213.813049,91.997551   C212.479477,101.853752 202.159119,108.142113 193.234955,108.219208   C183.485443,108.303436 173.521454,101.690865 172.190781,91.996361   C170.960464,83.032990 171.148636,73.851601 171.050323,64.762558   C170.946243,55.138065 173.191071,45.886574 177.394211,37.287067   C185.458282,20.788183 198.051163,9.256037 215.745514,3.572754   C216.978592,3.176701 217.921921,1.878616 219.000000,1.000001   C306.687561,1.000000 394.375122,1.000000 482.261597,1.320653   C482.792725,2.006802 483.057007,2.565665 483.467072,2.709785   C497.007019,7.468537 506.652130,16.128227 511.149292,30.056646   C511.299438,30.521799 512.362488,30.692207 513.000000,31.000004   C513.000000,167.354233 513.000000,303.708466 512.708984,440.209595   C511.951965,440.997864 511.314392,441.574738 511.045471,442.290161   C506.553528,454.239594 498.742767,463.136047 486.677185,467.622955   C475.653564,471.722382 464.429932,475.288391 453.268677,479.012146   C421.970764,489.454285 390.653748,499.839294 359.374084,510.335541   C358.095337,510.764648 357.117859,512.091431 356.000000,513.000000  z"/>
          <path class="target" opacity="1.000000" stroke="none" d=" M1.000000,205.468277   C1.704217,204.563950 2.698238,204.297653 3.068274,203.665878   C7.237000,196.548401 13.117582,192.873413 21.634212,192.932571   C48.125984,193.116638 74.619843,192.999985 101.112892,192.999969   C102.901451,192.999969 104.690010,192.999954 107.001068,192.999954   C107.001068,190.737091 107.001083,188.953644 107.001076,187.170197   C107.000977,168.341797 107.034912,149.513321 106.986694,130.685043   C106.961845,120.979797 110.755623,113.399239 119.655052,109.224052   C127.875092,105.367592 135.892136,106.150635 142.895935,112.389801   C147.569061,116.552719 152.256195,120.716820 156.689774,125.128876   C180.071945,148.397507 203.375397,171.745239 226.706497,195.065201   C236.006668,204.360931 238.600418,214.394424 233.958145,223.941879   C232.972092,225.969849 231.533768,227.889191 229.936020,229.491943   C201.468201,258.048828 172.948242,286.553741 144.427414,315.057770   C138.365921,321.115692 128.285706,322.976562 120.134918,319.609711   C112.447952,316.434448 107.015053,308.113922 107.006485,299.387268   C106.987663,280.225616 107.000908,261.063965 107.001060,241.902328   C107.001076,240.112549 107.001068,238.322754 107.001068,236.001175   C104.748901,236.001175 102.966736,236.001160 101.184570,236.001160   C76.857620,236.001144 52.520069,235.577606 28.208338,236.185867   C16.640841,236.475281 7.723418,233.241150 1.257330,223.676941   C1.000000,217.978851 1.000000,211.957703 1.000000,205.468277  z"/>
        </svg>
        div 登入
    .option(
      :class="{ active: nowPath.fullPath == '/dialog' || nowPath.fullPath == '/newpost' }" 
      v-if="userData && userData.category == 'user'") 
      RouterLink(to="/dialog") 
        <svg v-if="isMobile" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="Layer_1" x="0px" y="0px" width="100%" viewBox="0 0 512 512" enable-background="new 0 0 512 512" xml:space="preserve">
          <path class="target" opacity="1.000000" stroke="none" d=" M0.999997,406.000000   C1.000000,285.645233 1.000000,165.290466 1.288468,44.803246   C3.694347,39.981979 5.517257,35.131599 7.984384,30.634653   C15.387658,17.140362 26.749363,8.330155 41.206680,3.307475   C42.275948,2.935996 43.075211,1.787346 44.000000,1.000000   C135.688095,1.000000 227.376205,1.000000 319.282837,1.345011   C320.163147,2.118248 320.772644,2.774717 321.494690,2.940258   C331.369415,5.204237 339.788147,10.354986 346.695129,17.398211   C358.150269,29.079334 364.122589,43.239704 364.052704,59.916229   C363.889221,98.913948 364.000854,137.912811 364.001068,176.911209   C364.001068,178.843750 364.001068,180.776276 364.001068,182.773926   C341.372681,183.880783 320.019684,188.001877 299.219269,196.392792   C299.115143,194.600998 298.985504,193.614929 299.011963,192.633057   C299.282867,182.572952 290.269684,172.097778 278.142883,172.069901   C214.312515,171.923141 150.481613,171.981598 86.650932,172.024841   C78.050629,172.030670 69.757500,178.028656 66.937508,185.910507   C61.975433,199.779465 72.338287,213.980148 87.527809,213.987686   C144.692108,214.016068 201.856430,213.999023 259.020752,213.998993   C260.762299,213.998993 262.503876,213.998993 264.245422,213.998993   C243.889328,229.837479 226.021149,247.460831 212.017761,269.549255   C210.734467,267.875549 209.740448,266.475861 208.641800,265.163788   C203.331924,258.822357 196.061966,257.072083 188.323090,257.044159   C158.324707,256.935822 128.325592,256.956970 98.327072,257.044220   C93.561920,257.058075 88.778053,257.480286 84.038223,258.022858   C71.983582,259.402649 65.230324,268.081604 66.032639,281.234314   C66.584824,290.286407 75.832405,299.229767 86.621613,299.125092   C121.116943,298.790405 155.617569,299.001038 190.116150,299.001099   C192.012039,299.001099 193.907913,299.001099 196.473343,299.001099   C176.783539,350.023926 178.767914,399.696472 200.693985,449.000000   C198.242294,449.000000 196.414627,449.000000 194.586945,449.000000   C148.255508,448.999939 101.923988,448.951141 55.592731,449.041504   C46.456818,449.059296 38.256474,446.076141 30.461477,441.875366   C16.958115,434.598328 8.358234,423.149628 3.319257,408.817108   C2.940392,407.739471 1.791133,406.932709 0.999997,406.000000  M160.496918,86.998863   C135.366043,86.999359 110.232826,86.793121 85.105194,87.078819   C70.316238,87.246979 62.012615,102.863693 67.431396,115.883347   C71.626122,125.961990 80.441544,128.852753 90.288681,128.930801   C116.083649,129.135254 141.881546,129.051590 167.677643,128.937256   C171.081970,128.922180 174.653320,128.568405 177.853455,127.495255   C188.222824,124.017914 194.057541,113.846176 191.914871,103.302902   C190.060974,94.180481 180.763016,85.971893 170.976379,86.950096   C167.845490,87.263039 164.656952,86.998940 160.496918,86.998863  z"/>
          <path class="target" opacity="1.000000" stroke="none" d=" M345.468658,513.000000   C344.411438,512.339478 343.905823,511.206635 343.222351,511.086639   C317.835663,506.628601 295.563202,495.768494 275.734528,479.343903   C255.151459,462.294434 241.097153,440.827637 232.209991,415.960144   C227.693710,403.322998 225.232117,390.127411 224.912262,376.535553   C224.502808,359.136719 225.665436,342.001862 231.064468,325.355774   C236.097855,309.836975 243.474030,295.480164 253.175415,282.367249   C267.984924,262.349945 287.039154,247.481735 309.601135,237.230759   C322.406067,231.412872 335.800934,227.422760 349.948578,225.902832   C371.492554,223.588272 392.814667,224.410187 413.381775,231.268661   C431.150360,237.193939 447.487793,246.091660 461.975342,258.340210   C478.484528,272.298035 491.102417,289.032776 500.171631,308.544739   C505.415588,319.826721 509.564880,331.460907 511.120026,343.898590   C511.188324,344.444611 511.851593,344.916168 512.618896,345.211212   C513.000000,360.687561 513.000000,376.375122 512.615234,392.337585   C511.829865,393.282867 511.265381,393.905334 511.053253,394.630829   C508.005005,405.057312 505.995850,415.918091 501.786469,425.847626   C492.919281,446.764557 479.909760,464.871704 462.136749,479.473083   C442.303772,495.766754 420.160034,506.776825 394.770844,511.087341   C394.091888,511.202637 393.586395,512.339539 393.000000,513.000000   C377.312439,513.000000 361.624878,513.000000 345.468658,513.000000  M331.497589,348.001068   C324.669434,348.001129 317.838928,348.115021 311.013611,347.975922   C299.211578,347.735382 289.751709,359.530090 289.640930,368.778320   C289.504730,380.154358 300.388977,390.171448 311.070404,390.029999   C321.727051,389.888855 332.387024,389.999084 343.045532,389.999054   C344.624969,389.999054 346.204407,389.999023 348.001068,389.999023   C348.001068,397.606110 347.871277,404.427643 348.036499,411.242035   C348.212402,418.495850 347.641327,425.975586 349.220978,432.943024   C352.225800,446.196411 367.145813,452.443909 379.221283,445.370636   C386.707611,440.985504 390.068848,434.289185 390.016876,425.680634   C389.945862,413.917450 389.999146,402.153503 389.999146,389.999054   C402.733002,389.999054 414.858582,389.878143 426.980591,390.034607   C438.084900,390.177917 449.313751,379.431824 448.199982,367.694366   C447.208160,357.242767 438.332855,348.081177 426.910767,348.014465   C416.252625,347.952209 405.593811,348.001007 394.935303,348.000946   C393.357788,348.000946 391.780243,348.000946 389.998932,348.000946   C389.998932,339.545258 390.126770,331.889771 389.959595,324.240723   C389.819153,317.814911 390.186462,311.209473 388.824524,305.014252   C386.054108,292.412354 370.430756,285.176453 358.343719,292.899384   C351.386322,297.344757 347.997375,303.629456 347.999817,311.826447   C348.003387,323.755981 348.000763,335.685516 348.000763,348.001068   C342.425079,348.001068 337.460388,348.001068 331.497589,348.001068  z"/>
        </svg>
        div 動滋一下
    .option(
      :class="{ active: nowPath.fullPath == '/dashboard' }" 
      v-if="userData")
      RouterLink(to="/dashboard") 
        <svg v-if="isMobile" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="Layer_1" x="0px" y="0px" width="100%" viewBox="0 0 512 512" enable-background="new 0 0 512 512" xml:space="preserve">
          <path class="target" opacity="1.000000" stroke="none" d=" M502.998932,342.000000   C502.999268,368.495117 502.823059,394.491730 503.042755,420.484985   C503.345978,456.356567 479.082947,488.659607 445.476837,499.186096   C437.928802,501.550385 430.243195,503.010620 422.294495,503.009613   C311.481964,502.995544 200.668976,503.159271 89.857285,502.852600   C69.991112,502.797638 52.643620,494.804352 37.883896,481.400177   C24.564857,469.304413 16.299589,454.286835 12.414966,436.869232   C11.570234,433.081726 10.950553,429.155731 10.952661,425.151459   C11.011429,313.505768 10.939261,201.860001 11.063951,90.214417   C11.083027,73.133057 17.189384,57.851143 27.312801,44.250877   C39.877625,27.370716 56.770126,16.995499 77.184494,12.342920   C81.001450,11.473010 85.005791,11.055926 88.924026,11.053587   C200.902969,10.986722 312.882202,10.883103 424.860687,11.126483   C441.487610,11.162621 456.477997,17.407753 469.829407,27.343399   C486.775391,39.954021 496.837830,57.021839 501.683716,77.305153   C502.667450,81.422768 502.943939,85.793900 502.947510,90.048660   C503.017639,173.865723 502.999268,257.682861 502.998932,342.000000  z"/>
          <path fill="#fff" opacity="1.000000" stroke="none" d=" M362.000000,124.000000   C374.329102,124.000099 386.160797,123.846359 397.986511,124.046745   C408.299286,124.221489 416.747833,129.974854 419.440247,138.919281   C422.800018,150.080734 412.715912,163.970978 401.034393,163.978882   C334.724823,164.023773 268.415161,164.009949 202.105560,163.988052   C193.792099,163.985306 185.312210,156.088379 184.027618,147.328293   C182.588928,137.517365 187.765839,128.855591 196.503159,125.833427   C200.139694,124.575584 203.732239,123.968880 207.555023,123.972000   C258.869995,124.013802 310.184998,124.000000 362.000000,124.000000  z"/>
          <path fill="#fff" opacity="1.000000" stroke="none" d=" M284.000000,349.998932   C322.981201,349.999115 361.462433,349.991364 399.943634,350.003632   C413.601562,350.007996 423.697144,364.641541 418.834381,377.339905   C416.352509,383.820953 406.831604,389.961426 398.573395,389.968445   C333.938354,390.023438 269.302032,390.200562 204.669144,389.821198   C192.423477,389.749329 186.902908,384.966187 184.174698,373.736755   C181.780548,363.882416 188.155243,353.919128 198.147232,350.465759   C199.651901,349.945709 201.402451,350.018982 203.039429,350.017456   C229.859604,349.992249 256.679810,349.999207 284.000000,349.998932  z"/>
          <path fill="#fff" opacity="1.000000" stroke="none" d=" M392.964539,276.998901   C329.988007,276.998901 267.505676,276.989777 205.023361,277.009399   C196.361343,277.012115 189.777954,273.520294 185.940964,265.640289   C182.387527,258.342590 183.275238,251.280121 188.062851,244.817490   C192.178284,239.262207 197.960236,236.993423 204.771210,236.994766   C260.588745,237.005798 316.406311,237.001068 372.223846,237.001099   C381.387909,237.001114 390.564880,237.303635 399.712372,236.914505   C408.556244,236.538269 419.981476,247.228470 420.225800,256.614075   C420.489380,266.738708 408.539642,277.620697 399.955231,277.021210   C397.799713,276.870667 395.624725,276.998840 392.964539,276.998901  z"/>
          <path fill="#fff" opacity="1.000000" stroke="none" d=" M125.174545,126.700523   C133.410721,131.289200 136.187469,142.630341 130.218613,152.596115   C123.118942,164.449936 107.282227,166.857986 98.433838,156.937988   C92.335136,150.100677 91.503357,138.830734 96.589272,131.945602   C103.051765,123.196945 112.802795,120.591904 122.273102,125.092255   C123.162819,125.515053 124.028481,125.988457 125.174545,126.700523  z"/>
          <path fill="#fff" opacity="1.000000" stroke="none" d=" M100.259453,383.775208   C90.265404,375.931732 93.616226,365.176971 98.325111,357.420837   C102.497574,350.548248 112.216873,347.998749 120.789284,351.026398   C127.413239,353.365875 134.594696,363.897339 133.875687,370.825714   C132.857849,380.633667 126.382118,386.846985 117.396500,388.939056   C111.010773,390.425781 105.220116,388.850006 100.259453,383.775208  z"/>
          <path fill="#fff" opacity="1.000000" stroke="none" d=" M130.020844,246.131409   C137.145737,260.270630 131.689148,272.722412 116.925011,276.571655   C109.070923,278.619354 98.639549,272.793762 95.633621,264.052643   C91.086388,250.829453 100.115700,236.677002 115.186478,237.097443   C121.408524,237.271011 126.175621,240.900604 130.020844,246.131409  z"/>          
        </svg>
        div {{ userData.category == "user" ? "管理紀錄" : "管理學員紀錄"}}
    .option.signout(@click="signOut" v-if="userData" ) 
      <svg v-if="isMobile" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="Layer_1" x="0px" y="0px" width="100%" viewBox="0 0 512 512" enable-background="new 0 0 512 512" xml:space="preserve">
        <path class="target" opacity="1.000000" stroke="none" d=" M185.357254,512.732300   C176.312439,513.000000 167.624863,513.000000 158.468658,513.000000   C153.185669,510.635193 147.742722,510.887604 142.715866,509.190002   C105.854973,496.742157 68.912590,484.536255 32.009087,472.214508   C20.988350,468.534790 11.606429,462.737335 5.273933,452.570801   C3.123223,449.117889 2.752002,445.256195 1.249211,441.302856   C1.000000,304.312439 1.000000,167.624878 1.000000,30.468658   C3.324834,27.196945 2.366417,23.304949 4.380686,20.303980   C10.559690,11.098167 17.830221,3.468521 29.702827,1.249428   C117.687561,1.000000 205.375122,1.000000 293.531342,1.000000   C294.399994,1.297940 294.778992,1.695120 295.275269,1.760430   C316.950378,4.612859 329.756927,18.700274 339.100769,36.821560   C343.583008,45.514343 345.449738,55.041447 345.470398,64.844917   C345.514954,86.004219 345.601379,107.164345 345.432739,128.322815   C345.341522,139.768005 338.510162,149.100632 328.347931,152.238754   C312.346893,157.179916 296.893646,145.967072 296.599426,128.840286   C296.276123,110.017700 295.936340,91.164459 296.666870,72.366913   C297.487518,51.252163 285.666809,46.072239 270.354309,46.373245   C247.371109,46.825039 224.372360,46.495243 201.380234,46.487400   C198.497177,46.486416 195.610611,46.558609 193.321503,46.136791   C203.871292,51.822857 211.484146,60.535805 215.214096,72.473007   C217.012634,78.228951 217.533737,84.174301 217.530457,90.232193   C217.476273,190.197968 217.488953,290.163788 217.492050,390.129608   C217.492447,402.841583 218.145584,403.506744 230.649155,403.506958   C245.144180,403.507202 259.639221,403.517944 274.134247,403.499908   C279.594391,403.493103 284.777710,402.494690 289.179352,399.043640   C294.939392,394.527557 296.542633,388.296967 296.531006,381.287140   C296.486725,354.629730 296.462006,327.972076 296.538330,301.314636   C296.561920,293.078735 299.213776,285.905640 305.784241,280.615234   C313.598145,274.323669 322.458282,273.878876 331.240265,277.616669   C340.565277,281.585541 344.998474,289.599762 345.352600,299.469116   C345.818451,312.451874 345.476624,325.456848 345.486633,338.452240   C345.498840,354.280151 345.579834,370.108612 345.464996,385.935852   C345.235992,417.492523 321.772217,445.317993 290.792572,450.954620   C288.143188,451.436646 285.493469,451.477448 282.830505,451.480774   C265.503113,451.502380 248.175705,451.485474 230.848297,451.491791   C218.151840,451.496429 217.376419,452.139893 217.532867,464.671417   C217.648834,473.959961 216.656006,482.888580 212.217636,491.291748   C206.424103,502.260681 198.309402,510.111847 185.357254,512.732300  z"/>
        <path class="target" opacity="1.000000" stroke="none" d=" M384.778992,129.422607   C385.002472,120.147369 389.703461,111.950882 396.427765,109.296104   C406.778046,105.209785 415.082733,106.778717 422.175232,113.783089   C445.472229,136.790482 468.566071,160.004105 491.672546,183.203629   C498.884430,190.444519 506.652008,197.185059 512.761475,205.337952   C513.000000,211.021149 513.000000,217.042297 513.000000,223.531723   C512.724121,223.607986 512.406311,223.184799 511.962128,223.763031   C500.080139,239.231400 485.172302,251.799957 471.659271,265.700287   C456.010162,281.797913 439.994843,297.539398 424.147919,313.444885   C415.123840,322.502350 402.967957,324.018188 392.918152,316.910522   C387.538422,313.105804 384.776642,307.622681 384.999756,300.435669   C384.048859,298.293701 384.531647,296.428650 384.524323,294.639496   C384.445404,275.380676 384.580078,256.121460 384.213928,236.431549   C355.700378,236.000626 327.411591,235.864136 299.125336,236.073105   C288.880951,236.148804 279.567291,228.149414 278.106445,218.253067   C276.497681,207.354736 282.253143,196.672516 292.826965,193.540955   C294.671112,192.994781 296.409973,193.029297 298.189575,193.026901   C326.477325,192.988831 354.765137,193.000076 383.520874,193.000214   C384.961700,191.287888 384.467834,189.420929 384.475098,187.633530   C384.553650,168.374603 384.422668,149.115295 384.778992,129.422607  z"/>
      </svg>
      div 登出
  .hello(v-if="userData") 哈囉！ {{ hello }}

  

</template>

<script setup>
import { computed, inject, onMounted, reactive, ref, watch } from "vue";
import { useRouter, useRoute, onBeforeRouteLeave } from "vue-router";
const router = useRouter()
const nowPath = ref(useRoute())
const userData = inject("userData")
const hello = computed(()=>{
  return userData.value.username
})
const nav = ref(null)
const isMobile = ref(false)

watch(() => nowPath.value.fullPath, (newV, oldV) => {
  if(nav.value){
    nav.value.classList.remove("expand")
  }
})

function signOut(){
  let yes = confirm("確定要登出了嗎？")
  if(!yes) return
  
  userData.value = null
  localStorage.userData = null
  localStorage.token = null

  router.push("/auth")
}

function toggleNav(e){
  if(isMobile.value) return

  let navEl = e.target
  navEl.classList.toggle("expand")
}

function mobileInit(){
  let ww = window.innerWidth
  if(ww <= 871){
    isMobile.value = true
  }

  if(isMobile.value) return

  let container = document.querySelector("#nav .container")
  let root = document.documentElement
  let defaultHeight = window.getComputedStyle(container).height
  root.style.setProperty("--default-height", defaultHeight)
  container.style.height = "0px"
}


onMounted(()=>{
  mobileInit()
  
  let prevPos = 0
  window.onscroll = () => {
    let nowPos = window.scrollY
    if(prevPos - nowPos < -10){
      nav.value.classList.add("inactive")
    }
    else if(prevPos - nowPos > 10){
      nav.value.classList.remove("inactive")
    }

    prevPos = nowPos
  }

})

</script>

<style lang="sass" scoped>
:root
  --default-height: 0px
#nav
  border: 1px solid #000
  position: fixed
  right: 40px
  bottom: 40px
  width: 50px
  height: 50px
  border-radius: 50%
  background-color: #fff
  border: 8px solid darken(#fff, 6)
  box-shadow: 0 0.4em darken(#fff, 25)
  transition: .8s cubic-bezier(.05,.69,.24,.97)
  cursor: pointer
  // overflow: hidden
  
.container
  display: block
  width: 100px
  height: auto
  transform: translate(-33px, -100%)
  transition: .3s
  overflow: hidden
  // box-shadow: inset 0px 0px 10px 2px rgba(black, .5)
.option
  // border: 1px solid #000
  color: #fff
  margin-bottom: 20px
  text-align: center
  cursor: pointer
  a
    text-decoration: none
    color: #fff
  svg
    // filter: brightness(0) invert(1)
    width: 23px
    height: 23px
    path.target
      fill: #888
  &.signout
    // color: $color_hint
  &.active
    pointer-events: none
    a, div
      color: #999
    svg path.target
      fill: $color_primary
.hello
  width: 150px
  position: absolute
  bottom: -35px
  left: 50%
  text-align: center
  transform: translateX(-50%)
  font-size: 0.8rem
  color: #999


#nav
  .option:not(.signout), .option:not(.signout) a
    &:hover
      color: $color_list
  

#nav.expand
  overflow: visible
  box-shadow: 0 0.15em darken(#fff, 25)
  transform: translateY(.15em)
  background-color: lighten($color_hint, 10)
  border-color: $color_hint
  box-shadow: 0 .15em darken($color_hint, 25), 0 0 10px 6px rgba($color_hint, .5)
  .container
    height: var(--default-height) !important
  .option
    &.hide
      display: none

@media screen and (max-width: 871px)
  #nav
    width: 100%
    border-radius: 0px
    border: none
    right: 0
    bottom: 0
    height: auto
    &.inactive
      transition: .3s linear
      transform: translateY(100%)
    .container
      width: 100%
      height: 100% 
      transform: translate(0px, 0px)
      overflow: visible
      display: flex
      .option
        padding: 7px 0px
        flex: 1
        height: 100%
        margin: 0
        // border: 1px solid #000
        &.active
          a, div
            color: $color_primary
      div
        color: #888
        font-size: 0.8rem
      img
        display: block
        margin: 0 auto
        margin-bottom: 3px
      
</style>